<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>roblox's Mega Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Dosis:wght@200;500&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root { 
        --primary: #007aff; 
        --secondary: #00aaff; 
        --glass: rgba(255, 255, 255, 0.03);
        --blur: 15px;
        --card-radius: 20px;
        --card-scale: 1.1;
        --anim-speed: 0.6s;
    }
    body { margin: 0; font-family: 'Arial', sans-serif; background: #000; color: white; overflow: hidden; height: 100vh; user-select: none; touch-action: none; background-size: cover; background-position: center; }
    
    .liquid-glass-pane {
        position: fixed;
        inset: 0;
        z-index: -1;
        background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 40%, transparent 60%, rgba(255,255,255,0.05) 100%);
        pointer-events: none;
        box-shadow: inset 0 0 100px rgba(0,0,0,0.5);
    }
    .liquid-glass-pane::after {
        content: '';
        position: absolute;
        inset: 0;
        background: url('https://www.transparenttextures.com/patterns/glass-knobs.png');
        opacity: 0.03;
    }

    #scanlines { position: fixed; inset: 0; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.01), rgba(0, 255, 0, 0.03)); z-index: 50; background-size: 100% 4px, 3px 100%; pointer-events: none; display: none; }
    #noise-layer { position: fixed; inset: 0; background: url('https://grainy-gradients.vercel.app/noise.svg'); opacity: 0.05; z-index: 49; pointer-events: none; display: none; filter: contrast(150%) brightness(100%); }

    #glcanvas { position: fixed; inset: 0; z-index: -2; display: block; }
    
    .gui-overlay { position: fixed; inset: 0; background: radial-gradient(circle, transparent 20%, rgba(0,0,0,0.6) 100%); z-index: -1; pointer-events: none; transition: background 0.5s; }

    #loading-screen { position: fixed; inset: 0; background: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; transition: opacity 1.5s ease; }
    #loading-screen.hidden { opacity: 0; pointer-events: none; }
    .loading-bar-container { width: 300px; height: 6px; background: rgba(255,255,255,0.1); border-radius: 5px; margin-top: 40px; overflow: hidden; position: relative; }
    .loading-fill { width: 0%; height: 100%; background: var(--primary); transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 0 15px var(--primary); }
    .loading-text { margin-top: 15px; font-family: 'Orbitron'; font-size: 0.7em; letter-spacing: 2px; color: var(--secondary); animation: pulse 1.5s infinite; }
    
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

    #name-screen { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 90; }
    #name-screen.active { display: flex; }
    .name-box { 
        background: rgba(255,255,255,0.05); 
        padding: 50px; 
        border-radius: 30px; 
        backdrop-filter: blur(var(--blur)); 
        text-align: center; 
        border: 1px solid rgba(255,255,255,0.1); 
        box-shadow: 0 0 40px rgba(0,0,0,0.5), inset 0 0 20px rgba(255,255,255,0.05); 
    }
    #name-input { padding: 18px; width: 280px; background: rgba(0,0,0,0.3); border: 1px solid var(--primary); border-radius: 12px; color: white; text-align: center; margin-bottom: 25px; outline: none; font-family: 'Orbitron'; font-size: 1em; transition: 0.3s; }
    #name-input:focus { box-shadow: 0 0 20px var(--primary); border-color: var(--secondary); }
    #name-btn { padding: 15px 50px; background: var(--primary); border: none; border-radius: 50px; color: white; cursor: pointer; font-weight: bold; font-family: 'Orbitron'; letter-spacing: 2px; transition: 0.3s; }
    #name-btn:hover { background: var(--secondary); transform: scale(1.05); }

    .container { display: flex; flex-direction: column; height: 100vh; opacity: 0; transition: opacity 1s ease; z-index: 1; }
    .container.visible { opacity: 1; }
    .header { display: flex; align-items: center; justify-content: space-between; padding: 15px 30px; }
    .live-clock { font-size: 1.4em; color: var(--secondary); font-weight: bold; font-family: 'Dosis', sans-serif; }
    
    .section-tabs { display: flex; justify-content: flex-start; gap: 10px; padding: 10px 20px; overflow-x: auto; scrollbar-width: none; }
    .tab { padding: 10px 25px; cursor: pointer; border-radius: 25px; transition: 0.3s; background: rgba(255,255,255,0.05); font-size: 0.8em; text-transform: uppercase; white-space: nowrap; border: 1px solid transparent; flex-shrink: 0; backdrop-filter: blur(5px); }
    .tab.active { background: var(--primary); border-color: var(--secondary); box-shadow: 0 0 20px var(--primary); }

    .carousel { flex: 1; display: flex; align-items: center; position: relative; overflow: hidden; cursor: grab; }
    .section { position: absolute; width: 100%; display: none; height: 100%; align-items: center; }
    .section.active { display: flex; }
    .cards { display: flex; gap: 40px; transition: transform var(--anim-speed) cubic-bezier(0.2, 0.8, 0.2, 1); padding-left: 0; }
    .card { min-width: 240px; height: 340px; background-size: cover; background-position: center; border-radius: var(--card-radius); position: relative; transition: all 0.5s; opacity: 0.25; transform: scale(0.85); cursor: pointer; border: 1px solid rgba(255,255,255,0.1); }
    .card.active { 
        opacity: 1; 
        transform: scale(var(--card-scale)); 
        outline: 4px solid var(--primary); 
        box-shadow: 0 0 50px var(--primary), inset 0 0 30px rgba(255,255,255,0.1); 
    }
    .card-title { position: absolute; bottom: 0; width: 100%; background: linear-gradient(transparent, rgba(0,0,0,0.9)); text-align: center; padding: 25px 0 15px 0; border-radius: 0 0 var(--card-radius) var(--card-radius); font-weight: bold; pointer-events: none; }

    .details { 
        position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 400px; 
        padding: 20px; background: rgba(0,0,0,0.7); border-radius: 25px; 
        backdrop-filter: blur(var(--blur)); text-align: center; 
        border: 1px solid rgba(255,255,255,0.1); pointer-events: auto; 
        box-shadow: 0 20px 50px rgba(0,0,0,0.5), inset 0 0 20px rgba(255,255,255,0.05);
    }
    .launch-btn { width: 100%; padding: 15px; background: var(--primary); border: none; color: white; border-radius: 30px; cursor: pointer; font-weight: bold; font-size: 1.1em; }

    #settings-panel { position: fixed; top: 0; right: -400px; width: 340px; height: 100vh; background: rgba(5,5,10,0.95); backdrop-filter: blur(25px); z-index: 400; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); padding: 30px; border-left: 1px solid var(--primary); overflow-y: auto; box-sizing: border-box; scrollbar-width: thin; scrollbar-color: var(--primary) transparent; }
    #settings-panel.open { right: 0; }
    .setting-group { margin-bottom: 25px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 20px; }
    .setting-label { display: block; margin-bottom: 12px; font-size: 0.75em; color: var(--secondary); text-transform: uppercase; letter-spacing: 1px; }
    .premium-input { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 10px; color: white; border-radius: 8px; margin-bottom: 10px; outline: none; box-sizing: border-box; }
    .premium-slider { width: 100%; accent-color: var(--primary); cursor: pointer; }

    #app-window { position: fixed; inset: 0; background: #000; display: none; flex-direction: column; z-index: 200; }
    #app-header { height: 60px; background: var(--primary); display: flex; align-items: center; padding: 0 25px; justify-content: space-between; }
    #app-iframe { flex: 1; border: none; }

    .rgb-mode .card.active { animation: rgb-glow 3s linear infinite; }
    @keyframes rgb-glow {
        0% { outline-color: #ff0000; box-shadow: 0 0 30px #ff0000; }
        33% { outline-color: #00ff00; box-shadow: 0 0 30px #00ff00; }
        66% { outline-color: #0000ff; box-shadow: 0 0 30px #0000ff; }
        100% { outline-color: #ff0000; box-shadow: 0 0 30px #ff0000; }
    }

    /* --- DYNAMIC ISLAND PLAYER STYLES --- */
    .dynamic-island-container {
        position: fixed;
        top: 15px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 300;
        display: flex;
        justify-content: center;
        perspective: 1000px;
    }

    .player-card {
        width: 150px; 
        height: 35px;
        padding: 5px 15px;
        border-radius: 45px;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        color: white;
        transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        cursor: pointer;
        overflow: hidden;
    }

    .player-card.expanded {
        width: 340px;
        height: 520px;
        padding: 35px;
        border-radius: 45px;
        flex-direction: column;
        justify-content: center;
        gap: 20px;
        background: rgba(0, 0, 0, 0.8);
        cursor: default;
    }

    .album-art {
        width: 25px;
        height: 25px;
        border-radius: 50%;
        flex-shrink: 0;
        background: linear-gradient(to bottom right, var(--primary), var(--secondary));
        display: flex;
        justify-content: center;
        align-items: center;
        transition: all 0.5s ease;
    }
    .album-art::after { content: 'üéµ'; font-size: 12px; opacity: 0.8; }

    .player-card.expanded .album-art {
        width: 200px;
        height: 200px;
        border-radius: 25px;
    }
    .player-card.expanded .album-art::after { font-size: 80px; }

    .track-info {
        text-align: left;
        flex-grow: 1;
        margin: 0 10px;
        transition: all 0.5s ease;
        white-space: nowrap;
        overflow: hidden;
        display: block;
    }

    .player-card:not(.expanded) .track-info {
        max-width: 80px;
    }

    .player-card.expanded .track-info {
        text-align: center;
        width: 100%;
        margin: 0;
    }

    .track-title { font-size: 0.75rem; font-weight: 700; }
    .player-card.expanded .track-title { font-size: 1.4rem; }
    .track-artist { font-size: 0.6rem; opacity: 0.6; }

    .progress-container {
        width: 100%;
        height: 14px; /* Slightly taller for easier interaction */
        display: none;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        position: relative;
    }
    .player-card.expanded .progress-container { display: flex; }

    .progress-bg { position: absolute; left: 0; width: 100%; height: 6px; background: rgba(255, 255, 255, 0.1); border-radius: 10px; pointer-events: none; }
    .progress-fill { position: absolute; left: 0; height: 6px; width: 0%; background: var(--primary); border-radius: 10px; transition: width 0.1s linear; pointer-events: none; }

    .player-card.playing .progress-fill {
        height: 12px;
        background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 4'%3E%3Cpath d='M0,2 Q2.5,4 5,2 T10,2 T15,2 T20,2' fill='none' stroke='white' stroke-width='2' /%3E%3C/svg%3E");
        background-size: 20px 100%;
        animation: moveWave 0.5s linear infinite;
    }
    @keyframes moveWave { 0% { background-position: 0 0; } 100% { background-position: -20px 0; } }

    .controls { display: flex; align-items: center; gap: 5px; }
    .player-card.expanded .controls { justify-content: space-between; width: 80%; margin-top: 10px; }

    .btn { background: none; border: none; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; }
    .btn-main { width: 25px; height: 25px; background: rgba(255,255,255,0.1); border-radius: 50%; }
    .player-card.expanded .btn-main { width: 70px; height: 70px; background: rgba(255, 255, 255, 0.1); }
    
    .btn-side { display: none; opacity: 0; }
    .player-card.expanded .btn-side { display: flex; opacity: 0.8; }

    .icon { width: 16px; height: 16px; fill: currentColor; }
    .player-card.expanded .icon { width: 28px; height: 28px; }

    .time-labels { display: none; justify-content: space-between; width: 100%; font-size: 0.75rem; color: #aaa; }
    .player-card.expanded .time-labels { display: flex; }

  </style>
</head>
<body>

  <canvas id="glcanvas"></canvas>
  <div class="liquid-glass-pane"></div>
  <div id="scanlines"></div>
  <div id="noise-layer"></div>
  <div class="gui-overlay" id="overlay"></div>

  <div class="dynamic-island-container">
    <audio id="audio" preload="metadata">
        <source src="https://github.com/martiand9-stack/roblox/raw/refs/heads/main/msht,%20STXSTN%20-%20FREAKTEKK%20(Official%20Audio).mp3" type="audio/mpeg">
    </audio>
    <div class="player-card" id="playerCard">
        <div class="album-art"></div>
        <div class="track-info">
            <div class="track-title">FREAKTEKK</div>
            <div class="track-artist">msht, STXSTN</div>
        </div>
        <div class="progress-container" id="progressContainer">
            <div class="progress-bg"></div>
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="time-labels">
            <span id="currentTime">0:00</span>
            <span id="duration">0:00</span>
        </div>
        <div class="controls">
            <button class="btn btn-side"><svg class="icon" viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg></button>
            <button class="btn btn-main" id="playBtn">
                <svg class="icon" id="playIcon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                <svg class="icon" id="pauseIcon" viewBox="0 0 24 24" style="display: none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
            </button>
            <button class="btn btn-side"><svg class="icon" viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg></button>
        </div>
    </div>
  </div>

  <div id="loading-screen">
    <div style="width: 100px; height: 100px;">
        <svg viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg">
            <circle cx="150" cy="150" r="120" fill="none" stroke="#007aff" stroke-width="15" />
            <path d="M100 150 Q150 70, 200 150" fill="none" stroke="#007aff" stroke-width="20" stroke-linecap="round"/>
            <rect x="135" y="135" width="30" height="30" rx="5" fill="#007aff" />
        </svg>
    </div>
    <div class="loading-bar-container"><div class="loading-fill" id="loading-fill"></div></div>
    <div class="loading-text" id="loading-status">INITIALIZING SYSTEMS...</div>
  </div>

  <div id="name-screen">
    <div class="name-box">
      <h1 style="font-family:'Orbitron'; margin-bottom: 10px; color: var(--primary);">IDENTIFICATION</h1>
      <p style="font-size: 0.7em; color: rgba(255,255,255,0.5); margin-bottom: 30px; letter-spacing: 2px;">PLEASE ENTER OPERATOR NAME</p>
      <input type="text" id="name-input" placeholder="Operator ID" autocomplete="off">
      <br>
      <button id="name-btn">AUTHORIZE</button>
    </div>
  </div>

  <div class="container" id="main-container">
    <div class="header">
      <div><h1 id="user-greeting" style="margin:0; font-size:1.2em;">DASHBOARD</h1><div class="live-clock" id="live-clock">00:00:00</div></div>
      <div id="settings-btn" style="font-size: 24px; cursor: pointer; background: rgba(255,255,255,0.1); width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px);">‚öôÔ∏è</div>
    </div>

    <div class="section-tabs">
      <div class="tab active" data-section="proxy">Network</div>
      <div class="tab" data-section="ai">Intelligence</div>
      <div class="tab" data-section="media">Media</div>
      <div class="tab" data-section="games">Software</div>
    </div>

    <div class="carousel" id="carousel-viewport">
      <div class="section active" id="proxy-section">
        <div class="cards" id="proxy-cards">
          <div class="card active" style="background-image: url('https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=400');" data-title="Ultraviolet" data-desc="Node 1: Premium high-speed proxy." data-url="https://sciences.drsanjay.com.au/"><div class="card-title">Ultraviolet</div></div>
          <div class="card" style="background-image: url('https://images.unsplash.com/photo-1563986768609-322da13575f3?w=400');" data-title="Nebula" data-desc="Node 2: Stealth network relay." data-url="#"><div class="card-title">Nebula</div></div>
          <div class="card" style="background-image: url('https://images.unsplash.com/photo-1544197150-b99a580bb7a8?w=400');" data-title="Rammerhead" data-desc="Node 3: Persistent session tech." data-url="#"><div class="card-title">Rammerhead</div></div>
        </div>
      </div>
      <div class="section" id="ai-section"><div class="cards" id="ai-cards"></div></div>
      <div class="section" id="media-section"><div class="cards" id="media-cards"></div></div>
      <div class="section" id="games-section"><div class="cards" id="games-cards"></div></div>
    </div>

    <div class="details">
      <h2 id="detail-title" style="margin:0 0 5px 0; color:var(--secondary);">Select Interface</h2>
      <p id="detail-desc" style="margin:0 0 15px 0; opacity:0.8;">Ready for deployment.</p>
      <button class="launch-btn" id="launch-btn">EXECUTE</button>
    </div>
  </div>

  <div id="settings-panel">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
        <h2 style="margin:0; font-size:1.1em; font-family:'Orbitron'">PREMIUM CONFIG</h2>
        <span id="close-settings" style="cursor:pointer; font-size:28px;">√ó</span>
    </div>
    <div class="setting-group">
        <label class="setting-label">Accent Color (Hex)</label>
        <div style="display:flex; gap:10px;">
            <input type="color" id="accent-picker" class="premium-input" style="width:50px; padding:2px; height:40px;" value="#007aff">
            <input type="text" id="accent-hex" class="premium-input" placeholder="#007aff">
        </div>
    </div>
    <div class="setting-group">
        <label class="setting-label">Custom Wallpaper (URL)</label>
        <input type="text" id="bg-input" class="premium-input" placeholder="https://image.url/pic.jpg">
        <button id="apply-bg" style="width:100%; padding:8px; background:var(--primary); border:none; color:white; border-radius:5px; cursor:pointer;">Set Wallpaper</button>
    </div>
    <div class="setting-group">
        <label class="setting-label">Interface Blur Intensity</label>
        <input type="range" id="blur-slider" class="premium-slider" min="0" max="40" value="15">
    </div>
    <div class="setting-group">
        <label class="setting-label">Menu Carousel Speed</label>
        <input type="range" id="speed-slider" class="premium-slider" min="1" max="15" value="6">
    </div>
    <div class="setting-group">
        <label class="setting-label">Active Card Focus Scale</label>
        <input type="range" id="scale-slider" class="premium-slider" min="10" max="15" value="11">
    </div>
    <div class="setting-group">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <label class="setting-label" style="margin:0;">Sci-Fi Typography</label>
            <input type="checkbox" id="font-toggle">
        </div>
    </div>
    <div class="setting-group">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <label class="setting-label" style="margin:0;">RGB Glow Mode</label>
            <input type="checkbox" id="rgb-toggle">
        </div>
    </div>
    <div class="setting-group">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <label class="setting-label" style="margin:0;">Retro Scanlines</label>
            <input type="checkbox" id="scanline-toggle">
        </div>
    </div>
    <div class="setting-group">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <label class="setting-label" style="margin:0;">Digital Grain/Noise</label>
            <input type="checkbox" id="noise-toggle">
        </div>
    </div>
    <button id="reset-prefs" style="width:100%; padding:12px; background:rgba(255,50,50,0.1); color:#ff5555; border:1px solid #ff5555; border-radius:8px; cursor:pointer; font-weight:bold;">FACTORY RESET</button>
  </div>

  <div id="app-window">
    <div id="app-header"><span id="app-title">Application</span><span id="close-app" style="cursor:pointer; font-size:30px;">√ó</span></div>
    <iframe id="app-iframe"></iframe>
  </div>

  <script>
    /* SEEKABLE PLAYER LOGIC */
    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('playBtn');
    const playIcon = document.getElementById('playIcon');
    const pauseIcon = document.getElementById('pauseIcon');
    const progressFill = document.getElementById('progressFill');
    const progressContainer = document.getElementById('progressContainer');
    const currentTimeEl = document.getElementById('currentTime');
    const durationEl = document.getElementById('duration');
    const playerCard = document.getElementById('playerCard');

    // Click behavior for the card (Expansion)
    playerCard.onclick = (e) => {
        // If clicking controls or progress bar, don't collapse
        if(e.target.closest('#playBtn') || e.target.closest('#progressContainer')) return;
        playerCard.classList.toggle('expanded');
    };

    // Play/Pause button
    playBtn.onclick = (e) => {
        e.stopPropagation();
        if (audio.paused) { audio.play(); updatePlayState(true); } 
        else { audio.pause(); updatePlayState(false); }
    };

    // --- CONTROLLABLE STRING (SEEKING) ---
    progressContainer.onclick = (e) => {
        e.stopPropagation(); // Keep card open
        const rect = progressContainer.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const width = rect.width;
        const duration = audio.duration;
        
        if (duration && width > 0) {
            audio.currentTime = (clickX / width) * duration;
        }
    };

    function updatePlayState(isPlaying) {
        if (isPlaying) {
            playIcon.style.display = 'none';
            pauseIcon.style.display = 'block';
            playerCard.classList.add('playing');
        } else {
            playIcon.style.display = 'block';
            pauseIcon.style.display = 'none';
            playerCard.classList.remove('playing');
        }
    }

    audio.ontimeupdate = () => {
        const progressPercent = (audio.currentTime / audio.duration) * 100;
        progressFill.style.width = `${progressPercent}%`;
        currentTimeEl.textContent = formatTime(audio.currentTime);
        if(audio.duration) durationEl.textContent = formatTime(audio.duration);
    };

    function formatTime(seconds) {
        if (isNaN(seconds)) return "0:00";
        const min = Math.floor(seconds / 60);
        const sec = Math.floor(seconds % 60);
        return `${min}:${sec < 10 ? '0' : ''}${sec}`;
    }

    /* ALL ORIGINAL DASHBOARD SCRIPTING STARTS HERE */
    const extraSections = {
        ai: [
            { title: "ChatGPT", desc: "GPT-4 Architecture", img: "https://images.unsplash.com/photo-1676299081847-c0326a033355?w=400", url: "https://chatgpt.com" },
            { title: "Claude", desc: "Analytical Reasoning", img: "https://images.unsplash.com/photo-1620712943543-bcc4638ef7b9?w=400", url: "https://claude.ai" },
            { title: "Gemini", desc: "Multimodal Processing", img: "https://images.unsplash.com/photo-1614741118887-7a4ee193a5fa?w=400", url: "https://gemini.google.com" },
            { title: "Perplexity", desc: "Search Intelligence", img: "https://images.unsplash.com/photo-1518770660439-4636190af475?w=400", url: "https://perplexity.ai" }
        ],
        media: [
            { title: "YouTube", desc: "Global Video Stream", img: "https://images.unsplash.com/photo-1611162617213-7d7a39e9b1d7?w=400", url: "https://youtube.com" },
            { title: "Spotify", desc: "Hi-Fi Music Library", img: "https://images.unsplash.com/photo-1614680376593-902f74cc0d41?w=400", url: "https://spotify.com" },
            { title: "Discord", desc: "Encrypted Chat Hub", img: "https://images.unsplash.com/photo-1611162618071-b39a2ec055fb?w=400", url: "https://discord.com" },
            { title: "Netflix", desc: "Cinematic Access", img: "https://images.unsplash.com/photo-1522869635100-9f4c5e86aa37?w=400", url: "https://netflix.com" }
        ],
        games: [
            { title: "Roblox", desc: "Virtual Experiences", img: "https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=400", url: "https://roblox.com" },
            { title: "VS Code", desc: "Dev Environment", img: "https://images.unsplash.com/photo-1627398242454-45a1465c2479?w=400", url: "https://vscode.dev" },
            { title: "GitHub", desc: "Source Repo Access", img: "https://images.unsplash.com/photo-1618401471353-b98aadebc25a?w=400", url: "https://github.com" },
            { title: "GeForce Now", desc: "Cloud Gaming", img: "https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400", url: "https://play.geforcenow.com" }
        ]
    };

    Object.keys(extraSections).forEach(key => {
        const container = document.getElementById(`${key}-cards`);
        extraSections[key].forEach((item, index) => {
            const card = document.createElement('div');
            card.className = `card ${index === 0 ? 'active' : ''}`;
            card.style.backgroundImage = `url('${item.img}')`;
            card.dataset.title = item.title;
            card.dataset.desc = item.desc;
            card.dataset.url = item.url;
            card.innerHTML = `<div class="card-title">${item.title}</div>`;
            container.appendChild(card);
        });
    });

    /* BLACK HOLE ENGINE */
    (function() {
      const canvas = document.getElementById('glcanvas');
      const gl = canvas.getContext('webgl');
      const vs = `attribute vec2 a_position; void main() { gl_Position = vec4(a_position, 0.0, 1.0); }`;
      const fs = `precision mediump float; uniform float t; uniform vec2 r; uniform vec2 u_offset; uniform float u_zoom;
        vec2 myTanh(vec2 x) { vec2 ex = exp(x), emx = exp(-x); return (ex - emx) / (ex + emx); }
        void main() {
          vec2 uv = (gl_FragCoord.xy * 2.0 - r) / r.y;
          vec2 p_base = (uv * u_zoom) - u_offset;
          vec4 o_bg = vec4(0.0), o_anim = vec4(0.0);
          { vec2 p_img = p_base * mat2(1.0, -1.0, 1.0, 1.0); vec2 l_val = myTanh(p_img * 5.0 + 2.0); l_val = min(l_val, l_val * 3.0);
            float s_px = abs(p_img.x) < 0.001 ? 0.001 : p_img.x;
            float term = (0.1 - max(0.01 - dot(p_img, p_img) / 200.0, 0.0) * ((clamp(l_val, -2.0, 0.0).y - l_val.y) / s_px)) / abs(length(p_img) - 0.7);
            o_bg += vec4(term); o_bg *= max(o_bg, vec4(0.0)); }
          { vec2 p_anim = p_base / 0.7, d = vec2(-1.0, 1.0); float den = 0.1 + 5.0 / dot(5.0 * p_anim - d, 5.0 * p_anim - d);
            vec2 c = p_anim * mat2(1.0, 1.0, d.x / den, d.y / den), v = c;
            v *= mat2(cos(log(length(v)) + t * 0.2 + vec4(0.0, 33.0, 11.0, 0.0))) * 5.0;
            vec4 acc = vec4(0.0); for (int i = 1; i <= 7; i++) { acc += sin(vec4(v.x, v.y, v.y, v.x)) + 1.0; v += 0.7 * sin(vec2(v.y, v.x) * float(i) + t) / float(i) + 0.5; }
            o_anim += 1.0 - exp(-exp(c.x * vec4(0.6, -0.4, -1.0, 0.0)) / acc / (0.1 + 0.1 * pow(length(sin(v / 0.3) * 0.2 + c * vec2(1.0, 2.0)) - 1.0, 2.0)) / (1.0 + 7.0 * exp(0.3 * c.y - dot(c, c))) / (0.03 + abs(length(p_anim) - 0.7)) * 0.2); }
          gl_FragColor = clamp(mix(o_bg, o_anim, 0.5) * 1.5, 0.0, 1.0);
        }`;
      const prog = gl.createProgram();
      const s = (t, c) => { const sh = gl.createShader(t); gl.shaderSource(sh, c); gl.compileShader(sh); return sh; };
      gl.attachShader(prog, s(gl.VERTEX_SHADER, vs)); gl.attachShader(prog, s(gl.FRAGMENT_SHADER, fs)); gl.linkProgram(prog); gl.useProgram(prog);
      const rLoc = gl.getUniformLocation(prog, 'r'), tLoc = gl.getUniformLocation(prog, 't'), oLoc = gl.getUniformLocation(prog, 'u_offset'), zLoc = gl.getUniformLocation(prog, 'u_zoom');
      const b = gl.createBuffer(); gl.bindBuffer(gl.ARRAY_BUFFER, b); gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]), gl.STATIC_DRAW);
      const p = gl.getAttribLocation(prog, 'a_position'); gl.enableVertexAttribArray(p); gl.vertexAttribPointer(p, 2, gl.FLOAT, false, 0, 0);
      let zoom = 1.0, ox = 0.0, oy = 0.0, lx, ly, isD = false;
      window.addEventListener('mousedown', e => { if(e.target === canvas) { isD = true; lx = e.clientX; ly = e.clientY; }});
      window.addEventListener('mousemove', e => { if(!isD) return; ox += ((e.clientX - lx) / canvas.height) * 2.0 * zoom; oy -= ((e.clientY - ly) / canvas.height) * 2.0 * zoom; lx = e.clientX; ly = e.clientY; });
      window.addEventListener('mouseup', () => isD = false);
      function render(now) {
        gl.uniform2f(rLoc, canvas.width, canvas.height); gl.uniform1f(tLoc, now * 0.001); gl.uniform2f(oLoc, ox, oy); gl.uniform1f(zLoc, zoom);
        gl.drawArrays(gl.TRIANGLES, 0, 6); requestAnimationFrame(render);
      }
      window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; gl.viewport(0, 0, canvas.width, canvas.height); });
      window.dispatchEvent(new Event('resize')); requestAnimationFrame(render);
    })();

    /* CAROUSEL ENGINE */
    let startX = 0, prevTranslate = 0, isDragging = false, activeIndex = 0;

    function initCarousel(id) {
      const container = document.getElementById(`${id}-cards`);
      const cards = container.querySelectorAll('.card');
      activeIndex = 0;
      updatePosition(container, cards);

      container.onmousedown = container.ontouchstart = (e) => {
        isDragging = true;
        startX = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
        container.style.transition = 'none';
      };

      window.onmousemove = window.ontouchmove = (e) => {
        if (!isDragging) return;
        const x = e.type.includes('touch') ? e.touches[0].clientX : e.clientX;
        const walk = (x - startX);
        container.style.transform = `translateX(${prevTranslate + walk}px)`;
      };

      window.onmouseup = window.ontouchend = () => {
        if (!isDragging) return;
        isDragging = false;
        container.style.transition = 'transform var(--anim-speed) cubic-bezier(0.2, 0.8, 0.2, 1)';
        const center = window.innerWidth / 2;
        let minDistance = Infinity;
        cards.forEach((card, i) => {
          const rect = card.getBoundingClientRect();
          const dist = Math.abs(center - (rect.left + rect.width / 2));
          if (dist < minDistance) { minDistance = dist; activeIndex = i; }
        });
        updatePosition(container, cards);
      };
      cards.forEach((c, i) => { c.onclick = () => { activeIndex = i; updatePosition(container, cards); }; });
    }

    function updatePosition(container, cards) {
      const cardWidth = 240 + 40;
      const offset = (window.innerWidth / 2) - (cardWidth * activeIndex) - (240 / 2);
      prevTranslate = offset;
      container.style.transform = `translateX(${offset}px)`;
      cards.forEach((c, i) => {
        c.classList.toggle('active', i === activeIndex);
        if(i === activeIndex) {
          document.getElementById('detail-title').innerText = c.dataset.title;
          document.getElementById('detail-desc').innerText = c.dataset.desc;
        }
      });
    }

    /* PREMIUM SETTINGS ENGINE */
    const premiumActions = {
        accent: (hex) => {
            document.documentElement.style.setProperty('--primary', hex);
            document.documentElement.style.setProperty('--secondary', hex + 'aa');
            document.getElementById('accent-picker').value = hex;
            document.getElementById('accent-hex').value = hex;
        },
        bg: (url) => { document.body.style.backgroundImage = url ? `url('${url}')` : 'none'; document.getElementById('glcanvas').style.opacity = url ? '0' : '1'; },
        blur: (val) => document.documentElement.style.setProperty('--blur', val + 'px'),
        speed: (val) => document.documentElement.style.setProperty('--anim-speed', (val / 10) + 's'),
        scale: (val) => document.documentElement.style.setProperty('--card-scale', val/10),
        font: (state) => document.body.style.fontFamily = state ? "'Orbitron', sans-serif" : "'Arial', sans-serif"
    };

    document.getElementById('settings-btn').onclick = () => document.getElementById('settings-panel').classList.add('open');
    document.getElementById('close-settings').onclick = () => document.getElementById('settings-panel').classList.remove('open');

    document.getElementById('accent-picker').oninput = (e) => { premiumActions.accent(e.target.value); localStorage.setItem('mega-accent', e.target.value); };
    document.getElementById('accent-hex').onchange = (e) => { premiumActions.accent(e.target.value); localStorage.setItem('mega-accent', e.target.value); };
    document.getElementById('apply-bg').onclick = () => { const url = document.getElementById('bg-input').value; premiumActions.bg(url); localStorage.setItem('mega-custom-bg', url); };
    document.getElementById('blur-slider').oninput = (e) => { premiumActions.blur(e.target.value); localStorage.setItem('mega-blur', e.target.value); };
    document.getElementById('speed-slider').oninput = (e) => { premiumActions.speed(e.target.value); localStorage.setItem('mega-speed', e.target.value); };
    document.getElementById('scale-slider').oninput = (e) => { premiumActions.scale(e.target.value); localStorage.setItem('mega-scale', e.target.value); };
    document.getElementById('font-toggle').onchange = (e) => { premiumActions.font(e.target.checked); localStorage.setItem('mega-font', e.target.checked); };
    document.getElementById('rgb-toggle').onchange = (e) => { document.body.classList.toggle('rgb-mode', e.target.checked); localStorage.setItem('mega-rgb', e.target.checked); };
    document.getElementById('scanline-toggle').onchange = (e) => { document.getElementById('scanlines').style.display = e.target.checked ? 'block' : 'none'; localStorage.setItem('mega-scanlines', e.target.checked); };
    document.getElementById('noise-toggle').onchange = (e) => { document.getElementById('noise-layer').style.display = e.target.checked ? 'block' : 'none'; localStorage.setItem('mega-noise', e.target.checked); };
    document.getElementById('reset-prefs').onclick = () => { localStorage.clear(); location.reload(); };

    /* TAB SYSTEM */
    document.querySelectorAll('.tab').forEach(t => {
      t.onclick = () => {
        document.querySelectorAll('.tab').forEach(x => x.classList.remove('active')); t.classList.add('active');
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(t.dataset.section + '-section').classList.add('active');
        initCarousel(t.dataset.section);
      };
    });

    /* APP LAUNCHER */
    document.getElementById('launch-btn').onclick = () => {
      const active = document.querySelector('.section.active .card.active');
      if(active && active.dataset.url !== "#") {
        document.getElementById('app-iframe').src = active.dataset.url;
        document.getElementById('app-window').style.display = 'flex';
      }
    };
    document.getElementById('close-app').onclick = () => { document.getElementById('app-window').style.display = 'none'; document.getElementById('app-iframe').src = ''; };

    /* INITIALIZATION */
    window.onload = () => {
        const savedName = localStorage.getItem('mega-name');
        const savedAccent = localStorage.getItem('mega-accent');
        const savedRGB = localStorage.getItem('mega-rgb') === 'true';
        const savedScan = localStorage.getItem('mega-scanlines') === 'true';
        const savedNoise = localStorage.getItem('mega-noise') === 'true';
        const savedBG = localStorage.getItem('mega-custom-bg');
        const savedBlur = localStorage.getItem('mega-blur');
        const savedSpeed = localStorage.getItem('mega-speed');
        const savedScale = localStorage.getItem('mega-scale');
        const savedFont = localStorage.getItem('mega-font') === 'true';

        if(savedAccent) premiumActions.accent(savedAccent);
        if(savedRGB) { document.getElementById('rgb-toggle').checked = true; document.body.classList.add('rgb-mode'); }
        if(savedScan) { document.getElementById('scanline-toggle').checked = true; document.getElementById('scanlines').style.display = 'block'; }
        if(savedNoise) { document.getElementById('noise-toggle').checked = true; document.getElementById('noise-layer').style.display = 'block'; }
        if(savedBG) { document.getElementById('bg-input').value = savedBG; premiumActions.bg(savedBG); }
        if(savedBlur) { document.getElementById('blur-slider').value = savedBlur; premiumActions.blur(savedBlur); }
        if(savedSpeed) { document.getElementById('speed-slider').value = savedSpeed; premiumActions.speed(savedSpeed); }
        if(savedScale) { document.getElementById('scale-slider').value = savedScale; premiumActions.scale(savedScale); }
        if(savedFont) { document.getElementById('font-toggle').checked = true; premiumActions.font(true); }

        let prog = 0;
        const statusMsgs = ["SYNCHING CORES...", "BYPASSING FIREWALLS...", "DECRYPTING ASSETS...", "UPLOADING DATA...", "READY."];
        let lI = setInterval(() => {
            prog += Math.random() * 3.5; 
            if(prog > 100) prog = 100;
            document.getElementById('loading-fill').style.width = prog + '%';
            document.getElementById('loading-status').innerText = statusMsgs[Math.floor((prog/100) * (statusMsgs.length - 1))];
            if(prog >= 100) {
                clearInterval(lI);
                setTimeout(() => {
                    document.getElementById('loading-screen').classList.add('hidden');
                    if(savedName) {
                        document.getElementById('user-greeting').innerText = savedName.toUpperCase();
                        document.getElementById('main-container').classList.add('visible');
                        initCarousel('proxy');
                    } else { document.getElementById('name-screen').classList.add('active'); }
                }, 800);
            }
        }, 120);
    };

    document.getElementById('name-btn').onclick = () => {
        const name = document.getElementById('name-input').value || 'OPERATOR';
        localStorage.setItem('mega-name', name);
        document.getElementById('user-greeting').innerText = name.toUpperCase();
        document.getElementById('name-screen').classList.remove('active');
        document.getElementById('main-container').classList.add('visible');
        initCarousel('proxy');
    };

    setInterval(() => document.getElementById('live-clock').innerText = new Date().toLocaleTimeString(), 1000);
  </script>
</body>
</html>
